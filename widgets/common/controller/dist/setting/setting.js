define(["jimu-core","jimu-ui","jimu-for-builder","jimu-ui/setting-components","jimu-ui/color-picker"],(function(e,n,t,i,a){return function(e){var n={};function t(i){if(n[i])return n[i].exports;var a=n[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,t),a.l=!0,a.exports}return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:i})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(t.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var a in e)t.d(i,a,function(n){return e[n]}.bind(null,a));return i},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=373)}({139:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),function(e){e.Stack="STACK",e.SideBySide="SIDEBYSIDE"}(n.DisplayType||(n.DisplayType={}))},3:function(n,t){n.exports=e},31:function(e,n){e.exports=a},373:function(e,n,t){"use strict";var i,a=this&&this.__extends||(i=function(e,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])})(e,n)},function(e,n){function t(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)}),o=this&&this.__makeTemplateObject||function(e,n){return Object.defineProperty?Object.defineProperty(e,"raw",{value:n}):e.raw=n,e};Object.defineProperty(n,"__esModule",{value:!0});var r,l=t(3),s=t(6),c=t(7),d=t(139),p=t(4),u=t(374),h=t(375),v=t(31),g="#080808",f=t(57),m=t(58),y="none",w=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.getStyle=function(){return l.css(r||(r=o(["\n      font-size: 13px;\n      font-weight: lighter;\n      .setting-row-item {\n        width: 100%;\n        display: flex;\n        margin-top: 0.5rem;\n        > span.jimu-radio {\n          flex-shrink: 0;\n          margin-top: 0.1rem;\n        }\n        > label {\n          margin-bottom: 0;\n        }\n      }\n      .font-setting-row {\n        display: flex;\n        align-items: center;\n      }\n      .jimu-multi-select {\n        width: 100%;\n        > .jimu-dropdown {\n          width: 100%;\n        }\n        > .jimu-menu-item {\n          width: 100%;\n          height: ",";\n        }\n      }\n    "],["\n      font-size: 13px;\n      font-weight: lighter;\n      .setting-row-item {\n        width: 100%;\n        display: flex;\n        margin-top: 0.5rem;\n        > span.jimu-radio {\n          flex-shrink: 0;\n          margin-top: 0.1rem;\n        }\n        > label {\n          margin-bottom: 0;\n        }\n      }\n      .font-setting-row {\n        display: flex;\n        align-items: center;\n      }\n      .jimu-multi-select {\n        width: 100%;\n        > .jimu-dropdown {\n          width: 100%;\n        }\n        > .jimu-menu-item {\n          width: 100%;\n          height: ",";\n        }\n      }\n    "])),l.polished.rem(26))},n.onSettingChange=function(e,t){var i=n.props.config;i=Array.isArray(e)?i.setIn(e,t):i.set(e,t),n.props.onSettingChange({id:n.props.id,config:i})},n.onRadioChange=function(e,t,i){e.currentTarget.checked&&("onlyOpenOne"===t?n.onOpenTypeChange(t,i):"displayType"===t&&(i=n.getDisplayType(i),n.onSettingChange(["behavior",t],i)))},n.onOpenTypeChange=function(e,t){var i=n.props.config;i=(i=i.setIn(["behavior","openStarts"],l.Immutable([]))).setIn(["behavior",e],t),n.props.onSettingChange({id:n.props.id,config:i})},n.getDisplayType=function(e){return e?d.DisplayType.Stack:d.DisplayType.SideBySide},n.handleOpenStartMultipleClick=function(e,t,i){var a,o,r=(null===(o=null===(a=n.props.config)||void 0===a?void 0:a.behavior)||void 0===o?void 0:o.onlyOpenOne)?i.length?[t]:[]:i;n.onSettingChange(["behavior","openStarts"],r)},n.handleOpenStartSingleChange=function(e){var t=e.target.value,i=[];t!==y&&(i=[t]),n.onSettingChange(["behavior","openStarts"],i)},n.renderMultiSelectText=function(e){var t,i,a,o,r=null===(i=null===(t=n.props.config)||void 0===t?void 0:t.behavior)||void 0===i?void 0:i.onlyOpenOne,l=n.props.controlledWidgets;if(r&&e.length)return null===(a=l.find((function(n){return n.value===e[0]})))||void 0===a?void 0:a.label;var s=(null===(o=e)||void 0===o?void 0:o.length)||0;return n.translate("widgetsSelected",!1,{widgetNumber:s})},n.translate=function(e,t,i){var a=t?p.defaultMessages:u.default;return n.props.intl.formatMessage({id:e,defaultMessage:a[e]},i)},n.onIconIntervalChanged=function(e){e=+e,isNaN(e)?e=0:(e>999&&(e=999),e<0&&(e=0));var t=n.props.config;t=t.behavior.vertical?t.setIn(["appearance","space"],e):t.setIn(["appearance","card","labelGrowth"],e),n.props.onSettingChange({id:n.props.id,config:t})},n.getButtonVariants=function(e){var t,i,a,o,r,l,s,c=(null===(o=null===(a=null===(i=null===(t=n.props)||void 0===t?void 0:t.config)||void 0===i?void 0:i.appearance)||void 0===a?void 0:a.card.avatar)||void 0===o?void 0:o.type)||"primary",d=null===(s=null===(l=null===(r=e)||void 0===r?void 0:r.components)||void 0===l?void 0:l.button)||void 0===s?void 0:s.variants;return d=(d=d.setIn([c,"default","color"],g)).setIn([c,"active","color"],g)},n.onAdvancedChange=function(){var e,t,i=n.props,a=i.appTheme,o=i.id,r=n.props.config,l=!(null===(t=null===(e=r)||void 0===e?void 0:e.appearance)||void 0===t?void 0:t.advanced);if(r=r.setIn(["appearance","advanced"],l),l){var s=n.getButtonVariants(a);r=r.setIn(["appearance","card","variants"],s)}else r=r.setIn(["appearance","card","variants"],void 0);n.props.onSettingChange({id:o,config:r})},n.onDirectionChanged=function(e){var t=n.props.config;t=t.setIn(["behavior","vertical"],e).setIn(["appearance","card","labelGrowth"],0),e||(t=t.setIn(["appearance","space"],10)),n.props.onSettingChange({id:n.props.id,config:t}),s.getAppConfigAction().exchangeWidthAndHeight().exec()},n}return a(n,e),n.prototype.render=function(){var e,n,t,i,a,o,r,s,u,g,w,x,b,S,j,C,k,T,O,N,I=this,R=this.props,_=R.config,P=R.theme,B=R.controlledWidgets,M=R.appTheme,D=(null===(e=_)||void 0===e?void 0:e.behavior)||{},L=D.onlyOpenOne,z=D.displayType,A=D.vertical,F=D.openStarts,W=void 0===F?l.Immutable([]):F,V=(null===(n=_)||void 0===n?void 0:n.appearance)||{},G=V.space,H=V.advanced,E=(null===(t=_)||void 0===t?void 0:t.appearance.card)||{},K=E.showLabel,Y=E.labelGrowth,q=void 0===Y?0:Y,J=(null===(o=null===(a=null===(i=_)||void 0===i?void 0:i.appearance)||void 0===a?void 0:a.card)||void 0===o?void 0:o.avatar)||{},Q=J.size,U=J.shape,X=J.type,Z=void 0===X?"primary":X,$=null===(u=H?null===(s=null===(r=_)||void 0===r?void 0:r.appearance)||void 0===s?void 0:s.card.variants:this.getButtonVariants(M))||void 0===u?void 0:u[Z],ee=null===(g=$)||void 0===g?void 0:g.default,ne=null===(w=$)||void 0===w?void 0:w.active,te=null===(x=$)||void 0===x?void 0:x.hover,ie=(null===(b=W)||void 0===b?void 0:b.length)?W[0]:y,ae=A?G:q;return l.jsx("div",{className:"widget-setting-controller jimu-widget-setting",css:this.getStyle()},l.jsx(c.SettingSection,null,l.jsx(c.SettingRow,{flow:"no-wrap",label:this.translate("direction")},l.jsx(p.ButtonGroup,null,l.jsx(p.Button,{title:this.translate("horizontal"),type:"secondary",icon:!0,size:"sm",active:!A,onClick:function(){return I.onDirectionChanged(!1)}},l.jsx(p.Icon,{icon:f})),l.jsx(p.Button,{title:this.translate("vertical"),type:"secondary",icon:!0,size:"sm",active:A,onClick:function(){return I.onDirectionChanged(!0)}},l.jsx(p.Icon,{icon:m}))))),l.jsx(c.SettingSection,{title:this.translate("behavior")},l.jsx(c.SettingRow,{flow:"wrap",label:this.translate("openWidget")},l.jsx("div",{className:"setting-row-item"},l.jsx(p.Radio,{id:"only-open-one",style:{cursor:"pointer"},name:"only-open-one",onChange:function(e){return I.onRadioChange(e,"onlyOpenOne",!0)},checked:L}),l.jsx(p.Label,{style:{cursor:"pointer"},for:"only-open-one",className:"ml-2"},this.translate("single",!0))),l.jsx("div",{className:"setting-row-item"},l.jsx(p.Radio,{id:"open-multiple",style:{cursor:"pointer"},name:"only-open-one",onChange:function(e){return I.onRadioChange(e,"onlyOpenOne",!1)},checked:!L}),l.jsx(p.Label,{style:{cursor:"pointer"},for:"open-multiple",className:"ml-2"},this.translate("multiple",!0)))),l.jsx(c.SettingRow,{flow:"wrap",label:this.translate("openStart")},!L&&l.jsx(p.MultiSelect,{values:W,items:B,onClickItem:this.handleOpenStartMultipleClick,displayByValues:this.renderMultiSelectText}),L&&l.jsx(p.Select,{value:ie,onChange:this.handleOpenStartSingleChange,className:"w-100"},l.jsx("option",{value:y},this.translate("none",!0)),null===(S=B)||void 0===S?void 0:S.map((function(e){return l.jsx("option",{key:e.value,value:e.value},e.label)})))),!L&&l.jsx(c.SettingRow,{flow:"wrap",label:this.translate("displayType")},l.jsx("div",{className:"setting-row-item"},l.jsx(p.Radio,{id:"display-stack",style:{cursor:"pointer"},name:"display-type",onChange:function(e){return I.onRadioChange(e,"displayType",!0)},checked:z===d.DisplayType.Stack}),l.jsx(p.Label,{style:{cursor:"pointer"},for:"display-stack",className:"ml-2"},this.translate("stack"))),l.jsx("div",{className:"setting-row-item"},l.jsx(p.Radio,{id:"display-side-by-side",style:{cursor:"pointer"},name:"display-type",onChange:function(e){return I.onRadioChange(e,"displayType",!1)},checked:z===d.DisplayType.SideBySide}),l.jsx(p.Label,{style:{cursor:"pointer"},for:"display-side-by-side",className:"ml-2"},this.translate("sideBySide"))))),l.jsx(c.SettingSection,{title:this.translate("appearance",!0)},l.jsx(c.SettingRow,{flow:"wrap",label:this.translate("iconStyle")},l.jsx(h.Shapes,{type:h.ShapeType.Circle,title:this.translate("circle",!0),className:"mr-2",active:"circle"===U,theme:P,onClick:function(){return I.onSettingChange(["appearance","card","avatar","shape"],"circle")}}),l.jsx(h.Shapes,{type:h.ShapeType.Rectangle,title:this.translate("rectangle",!0),active:"rectangle"===U,theme:P,onClick:function(){return I.onSettingChange(["appearance","card","avatar","shape"],"rectangle")}})),l.jsx(c.SettingRow,{label:this.translate("showIconLabel")},l.jsx(p.Switch,{checked:K,onChange:function(e){return I.onSettingChange(["appearance","card","showLabel"],e.target.checked)}})),l.jsx(c.SettingRow,{flow:"no-wrap",label:this.translate("iconSize")},l.jsx(p.Select,{value:Q,onChange:function(e){return I.onSettingChange(["appearance","card","avatar","size"],e.target.value)},className:"w-50"},l.jsx("option",{value:"sm"},this.translate("small",!0)),l.jsx("option",{value:"default"},this.translate("medium",!0)),l.jsx("option",{value:"lg"},this.translate("large",!0)))),l.jsx(c.SettingRow,{flow:"no-wrap",label:this.translate("iconInterval")},l.jsx(p.NumericInput,{className:"w-50",value:ae,showHandlers:!1,onAcceptValue:this.onIconIntervalChanged}))),l.jsx(c.SettingSection,null,l.jsx(c.SettingRow,{flow:"no-wrap",label:this.translate("advance")},l.jsx(p.Switch,{checked:H,onChange:this.onAdvancedChange})),H&&l.jsx(c.SettingRow,{label:this.translate("states"),flow:"wrap"},l.jsx(p.Tabs,{pills:!0,className:"flex-grow-1 w-100 h-100",fill:!0},l.jsx(p.Tab,{className:"tab-title-item",active:!0,title:this.translate("regular")},l.jsx(c.SettingRow,{className:"mt-2",label:this.translate("textFormat"),flow:"no-wrap"},l.jsx("div",{className:"font-setting-row"},l.jsx(c.FontStyle,{bold:ee.bold,italic:ee.italic,underline:ee.underline,strike:ee.strike,onFontChange:function(e,n){return I.onSettingChange(["appearance","card","variants",Z,"default",e],n)}}),l.jsx(v.ThemeColorPicker,{specificTheme:M,value:null===(j=ee)||void 0===j?void 0:j.color,onChange:function(e){return I.onSettingChange(["appearance","card","variants",Z,"default","color"],e)}}))),l.jsx(c.SettingRow,{className:"mt-2",label:this.translate("iconBackground"),flow:"no-wrap"},l.jsx(v.ThemeColorPicker,{specificTheme:M,value:null===(C=ee)||void 0===C?void 0:C.bg,onChange:function(e){return I.onSettingChange(["appearance","card","variants",Z,"default","bg"],e)}}))),l.jsx(p.Tab,{className:"tab-title-item",title:this.translate("select")},l.jsx(c.SettingRow,{className:"mt-2",label:this.translate("textFormat"),flow:"no-wrap"},l.jsx("div",{className:"font-setting-row"},l.jsx(c.FontStyle,{bold:ne.bold,italic:ne.italic,underline:ne.underline,strike:ne.strike,onFontChange:function(e,n){return I.onSettingChange(["appearance","card","variants",Z,"active",e],n)}}),l.jsx(v.ThemeColorPicker,{specificTheme:M,value:null===(k=ne)||void 0===k?void 0:k.color,onChange:function(e){return I.onSettingChange(["appearance","card","variants",Z,"active","color"],e)}}))),l.jsx(c.SettingRow,{className:"mt-2",label:this.translate("iconBackground"),flow:"no-wrap"},l.jsx(v.ThemeColorPicker,{specificTheme:M,value:null===(T=ne)||void 0===T?void 0:T.bg,onChange:function(e){return I.onSettingChange(["appearance","card","variants",Z,"active","bg"],e)}}))),l.jsx(p.Tab,{className:"tab-title-item",title:this.translate("hover")},l.jsx(c.SettingRow,{className:"mt-2",label:this.translate("textFormat"),flow:"no-wrap"},l.jsx("div",{className:"font-setting-row"},l.jsx(c.FontStyle,{bold:te.bold,italic:te.italic,underline:te.underline,strike:te.strike,onFontChange:function(e,n){return I.onSettingChange(["appearance","card","variants",Z,"hover",e],n)}}),l.jsx(v.ThemeColorPicker,{specificTheme:M,value:null===(O=te)||void 0===O?void 0:O.color,onChange:function(e){return I.onSettingChange(["appearance","card","variants",Z,"hover","color"],e)}}))),l.jsx(c.SettingRow,{className:"mt-2",label:this.translate("iconBackground"),flow:"no-wrap"},l.jsx(v.ThemeColorPicker,{specificTheme:M,value:null===(N=te)||void 0===N?void 0:N.bg,onChange:function(e){return I.onSettingChange(["appearance","card","variants",Z,"hover","bg"],e)}})))))))},n.mapExtraStateProps=function(e,n){var t,i,a,o,r,s=null===(t=e)||void 0===t?void 0:t.appStateInBuilder,c=null===(a=null===(i=s)||void 0===i?void 0:i.appConfig)||void 0===a?void 0:a.widgets;return{controlledWidgets:(c&&(null===(o=c[n.id])||void 0===o?void 0:o.widgets)||l.Immutable([])).map((function(e){var n;return{label:null===(n=c[e])||void 0===n?void 0:n.label,value:e}})),appTheme:null===(r=s)||void 0===r?void 0:r.theme}},n}(s.BaseWidgetSetting);n.default=w},374:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={_widgetLabel:"Widget Controller",behavior:"Behavior",openWidget:"How many widgets can be opened",displayType:"Display type",stack:"Stack",sideBySide:"Side by side",iconStyle:"Icon style",showIconLabel:"Show label",iconInterval:"Icons interval",openStart:"Open widgets when the page is loaded",widgetsSelected:"{widgetNumber} widgets selected"}},375:function(e,n,t){"use strict";var i=this&&this.__makeTemplateObject||function(e,n){return Object.defineProperty?Object.defineProperty(e,"raw",{value:n}):e.raw=n,e};Object.defineProperty(n,"__esModule",{value:!0});var a,o,r=t(3);!function(e){e[e.Circle=0]="Circle",e[e.Rectangle=1]="Rectangle"}(a=n.ShapeType||(n.ShapeType={})),n.Shapes=function(e){var n,t,l,s=e.className,c=e.title,d=e.type,p=e.active,u=e.theme,h=e.onClick,v=null===(n=u)||void 0===n?void 0:n.colors.white,g=null===(t=u)||void 0===t?void 0:t.colors.palette.primary[700],f=null===(l=u)||void 0===l?void 0:l.colors.palette.dark[900],m=r.css(o||(o=i(["\n    background-color: ",";\n    cursor: pointer;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: ",";\n    height: ",";\n    margin: 2px;\n    &.active{\n      outline: 2px "," solid;\n    }\n    .inner {\n      width: 66%;\n      height: 66%;\n      border: 1px "," solid;\n      border-radius: 2px;\n      &.circle {\n        border-radius: 50%;\n      }\n    }\n  "],["\n    background-color: ",";\n    cursor: pointer;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: ",";\n    height: ",";\n    margin: 2px;\n    &.active{\n      outline: 2px "," solid;\n    }\n    .inner {\n      width: 66%;\n      height: 66%;\n      border: 1px "," solid;\n      border-radius: 2px;\n      &.circle {\n        border-radius: 50%;\n      }\n    }\n  "])),v,r.polished.rem(28),r.polished.rem(28),g,f);return r.jsx("div",{css:m,onClick:h,title:c,className:r.classNames("choose-shape",{active:p},s)},r.jsx("div",{className:r.classNames("inner",{rectangle:d===a.Rectangle},{circle:d===a.Circle})}))}},4:function(e,t){e.exports=n},57:function(e,n){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M2 8c0-.291.231-.527.516-.527h9.508L8.527 3.9a.535.535 0 010-.746.508.508 0 01.73 0L14 8l-4.743 4.846a.508.508 0 01-.73 0 .535.535 0 010-.746l3.497-3.573H2.516A.522.522 0 012 8z" fill="#000" fill-rule="nonzero"></path></svg>'},58:function(e,n){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M8 2c.291 0 .527.231.527.516v9.508L12.1 8.527a.535.535 0 01.746 0 .508.508 0 010 .73L8 14 3.154 9.257a.508.508 0 010-.73.535.535 0 01.746 0l3.573 3.497V2.516C7.473 2.231 7.709 2 8 2z" fill="#000" fill-rule="nonzero"></path></svg>'},6:function(e,n){e.exports=t},7:function(e,n){e.exports=i}})}));